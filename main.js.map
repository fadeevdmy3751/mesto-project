{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto/webpack/bootstrap","webpack://mesto/webpack/runtime/define property getters","webpack://mesto/webpack/runtime/hasOwnProperty shorthand","webpack://mesto/./src/components/popup.js","webpack://mesto/./src/components/secret.js","webpack://mesto/./src/components/api.js","webpack://mesto/./src/components/card.js","webpack://mesto/./src/components/validate.js","webpack://mesto/./src/components/utils.js","webpack://mesto/./src/components/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","function closePopup(popup) {\r\n  popup.classList.remove('popup_opened');\r\n  document.removeEventListener('keyup', popup.ESChandler);\r\n  popup.ESChandler = null;\r\n}\r\n\r\n// слушатель событий, который закрывает модальное окно по нажатию на Esc, добавляется при открытии\r\n// модального окна и удаляется при его закрытии.\r\n\r\n// возвращает колбэк для навешивания на нажатие esc\r\nfunction closeOnEscape(popup){\r\n  return (evt) => {\r\n    if (evt.key === \"Escape\")\r\n      closePopup(popup);\r\n  }\r\n}\r\n\r\nfunction openPopup(popup) {\r\n  popup.classList.add('popup_opened');\r\n  popup.ESChandler = closeOnEscape(popup);\r\n  document.addEventListener('keyup',popup.ESChandler);\r\n}\r\n\r\nexport {openPopup, closePopup}\r\n","const COHORT = 'plus-cohort-11';\nconst TOKEN = '7da4e682-e653-495f-9d74-1a03b7d57194';\nexport {COHORT, TOKEN};\n","import {TOKEN, COHORT} from './secret.js';\nimport {refreshLikes} from \"./card.js\";\n\nconst config = {\n  baseUrl: 'https://nomoreparties.co/v1/' + COHORT,\n    headers: {\n      authorization: TOKEN,\n      'Content-Type': 'application/json'\n    }\n}\n\nconst URLs = {\n  cards: '/cards',\n  me: '/users/me',\n  like: '/cards/likes/',\n  avatar: '/users/me/avatar'\n}\n\nexport function getInitialCards(){\n  return fetch(config.baseUrl + URLs.cards, {headers: config.headers})\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка getInitialCards: ${res.status}`);\n    });\n}\n\nexport function getMe(){\n  return fetch(config.baseUrl + URLs.me,{headers: config.headers})\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка getMe: ${res.status}`);\n    });\n}\n\nexport function editAvatar(url){\n  return fetch(config.baseUrl + URLs.avatar, {\n    method: 'PATCH',\n    headers:  config.headers,\n    body: JSON.stringify({\n      avatar: url,\n    })\n  })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка editAvatar: ${res.status}`);\n    });\n}\n\nexport function editProfile(name, about){\n  return fetch(config.baseUrl + URLs.me, {\n    method: 'PATCH',\n    headers:  config.headers,\n    body: JSON.stringify({\n      name: name,\n      about: about\n    })\n  })\n  .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка editProfile: ${res.status}`);\n      });\n}\n\nexport function addCardOnServer(name, link){\n  return  fetch(config.baseUrl + URLs.cards, {\n    method: 'POST',\n    headers:  config.headers,\n    body: JSON.stringify({\n      name: name,\n      link: link\n    })\n  })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка addCardOnServer: ${res.status}`);\n    });\n}\n\nexport function deleteCard(event){\n  const card = event.target.closest('.card');\n  fetch(config.baseUrl + URLs.cards +'/' + card._id, {\n    method: 'DELETE',\n    headers:  config.headers,\n  })\n    .then(res => {\n      if (res.ok) {\n        console.log('delete card success');\n        card.remove();\n      } else console.log(`Ошибка deleteCard: ${res.status}`);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\nexport function likeCard(event){\n  const card = event.target.closest('.card');\n  if (card.myLike){ //удалить\n    fetch(config.baseUrl + URLs.like + card._id, {\n      method: 'DELETE',\n      headers:  config.headers,\n    })\n      .then(res => {\n        if (res.ok) {\n          console.log('delete like success');\n          return res.json()\n        } else console.log(`Ошибка delete like: ${res.status}`);\n      })\n      .then(json => refreshLikes(card, json))\n      .catch((err) => {\n        console.log(err);\n      });\n  } else { // поставить\n    fetch(config.baseUrl + URLs.like + card._id, {\n      method: 'PUT',\n      headers:  config.headers,\n    })\n      .then(res => {\n        if (res.ok) {\n          console.log('put like success');\n          return res.json()\n        } else console.log(`Ошибка put like: ${res.status}`);\n      })\n      .then(json => refreshLikes(card, json))\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n}\n","const cardTemplate = document.querySelector('#card-template').content;\nconst bigImgPopup = document.querySelector('.big-img');\nconst bigImage = bigImgPopup.querySelector('img');\nconst bigImgCaption = bigImgPopup.querySelector('figcaption');\n\nimport {openPopup} from \"./popup.js\";\nimport {myID} from \"./index.js\";   // перекрестный импорт хз как работает\nimport {deleteCard, likeCard} from \"./api.js\";\n\nfunction refreshLikes(card, json){\n  card.querySelector('.card__like-count').textContent = json.likes.length;\n  card.myLike = json.likes.some(liker => liker._id === myID)\n  if (card.myLike){\n    card.querySelector('.card__like').classList.add('card__like_set')\n  } else {\n    card.querySelector('.card__like').classList.remove('card__like_set')\n  }\n}\n\nfunction createCard(json) {\n  const card = cardTemplate.querySelector('.card').cloneNode(true);\n  card.querySelector('.card__name').textContent = json.name;\n  const cardImg = card.querySelector('.card__image');\n  cardImg.alt = json.name;\n  cardImg.src = json.link;\n  card._id = json._id;\n  card.ownerId = json.owner._id;\n  if (card.ownerId !== myID){\n    card.querySelector('.card__delete').style.display = 'none';\n  } else {\n    const cardDel = card.querySelector('.card__delete');\n    cardDel.addEventListener('click', deleteCard);\n  }\n  cardImg.addEventListener('click', () => {\n    bigImage.src = cardImg.src;\n    bigImage.alt = json.name;\n    bigImgCaption.textContent = json.name;\n    openPopup(bigImgPopup);\n  })\n  refreshLikes(card, json);\n  card.querySelector('.card__like').addEventListener('click', likeCard);\n  return card;\n}\n\nfunction addCard(card, container, beginning = false) {\n  if(!beginning)\n    container.append(card);\n  else\n    container.prepend(card);\n}\n\nexport {addCard, createCard, refreshLikes};\n","const validationParams = {\n  formSelector: '.form',\n  inputSelector: '.form__field',\n  submitButtonSelector: '.form__button',\n  inactiveButtonClass: 'form__button_disabled',\n  inputErrorClass: 'form__field_error',\n  errorClass: 'form__error_visible',\n}\n\n// функция добавления обработчиков всем полям формы\nconst setEventListeners = (formElement, settings) => {\n\n  const inputList = Array.from(formElement.querySelectorAll(settings.inputSelector));\n  const buttonElement = formElement.querySelector(settings.submitButtonSelector);\n  toggleButtonState (inputList, buttonElement, settings.inactiveButtonClass);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener('input', function () {\n      isValid(formElement, inputElement, settings.inputErrorClass, settings.errorClass);\n      toggleButtonState (inputList, buttonElement, settings.inactiveButtonClass);\n    });\n  });\n};\n\nconst clearPopupInputs = (popup, settings) => {\n  const formElement = popup.querySelector(settings.formSelector);\n  const inputList = Array.from(popup.querySelectorAll(settings.inputSelector));\n  const buttonElement = formElement.querySelector(settings.submitButtonSelector);\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, settings.inputErrorClass, settings.errorClass);\n    inputElement.value = ''\n  });\n  toggleButtonState (inputList, buttonElement, settings.inactiveButtonClass);\n}\n\n// отключение и включение кнопки submit\nfunction toggleButtonState (inputList, buttonElement, inactiveButtonClass){\n  if (hasInvalidInput(inputList)){\n    buttonElement.classList.add(inactiveButtonClass)\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.classList.remove(inactiveButtonClass)\n    buttonElement.disabled = false;\n  }\n}\n\n// проверка наличия хотя бы одного инпут-инвалида\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  })\n};\n\nconst isValid = (formElement, inputElement, inputErrorClass, errorClass) => {\n  if (!inputElement.validity.valid) {\n    showInputError(formElement, inputElement, inputElement.validationMessage, inputErrorClass, errorClass);\n  } else {\n    hideInputError(formElement, inputElement, inputErrorClass, errorClass);\n  }\n};\n\nconst showInputError = (formElement, inputElement, errorMessage, inputErrorClass, errorClass) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.add(inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(errorClass);\n};\n\nconst hideInputError = (formElement, inputElement, inputErrorClass, errorClass) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.remove(inputErrorClass);\n  errorElement.classList.remove(errorClass);\n  errorElement.textContent = '';\n};\n\nconst enableValidation = (settings) => {\n  const formList = Array.from(document.querySelectorAll(settings.formSelector));\n  formList.forEach((formElement) => {\n    formElement.addEventListener('submit', (evt) => {\n      evt.preventDefault();\n    });\n    setEventListeners(formElement, settings);\n  });\n};\n\nexport {validationParams, clearPopupInputs, enableValidation};\n","const profileName = document.querySelector('.profile__name');\r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst profileAva = document.querySelector('.profile__avatar')\r\n\r\nexport function refreshProfile(name=null, about = null, avatar = null){\r\n  if(name)\r\n    profileName.textContent = name\r\n  if(about)\r\n    profileDescription.textContent = about\r\n  if(avatar)\r\n    profileAva.style.backgroundImage = `url('${avatar}')`;\r\n}\r\n","const content = document.querySelector('.content');\nconst profileAvatar = content.querySelector('.profile__avatar');\nconst avatarEditPopup = document.querySelector('.popup-avatar-edit');\nconst avatarEditForm = avatarEditPopup.querySelector('.form[name=\"popup-avatar-edit-form\"]');// уточнить класс или name\nconst profileEditPopup = document.querySelector('.popup-profile-edit');// уточнить класс\nconst profileEditBtn = content.querySelector('.profile__edit-button');\nconst profileEditForm = profileEditPopup.querySelector('.form[name=\"popup-profile-edit-form\"]');// уточнить класс или name\nconst profileName = content.querySelector('.profile__name');\nconst profileDescription = content.querySelector('.profile__description');\nconst nameInput = profileEditPopup.querySelector('#form__field-name');\nconst descriptionInput = profileEditPopup.querySelector('#form__field-profession');\nconst avatarInput = avatarEditForm.querySelector('#form__field-ava');\nconst cardAddPopup = document.querySelector('.popup-card-add'); // уточнить класс\nconst cardAddBtn = content.querySelector('.profile__add-button');\nconst cardAddForm = cardAddPopup.querySelector('.form[name=\"popup-card-add-form\"]'); // уточнить класс или name\nconst cardNameInput = cardAddPopup.querySelector('#card-add-name');\nconst cardLinkInput = cardAddPopup.querySelector('#card-add-link');\nconst elementsContainer = content.querySelector('.elements');\nconst popups = document.querySelectorAll('.popup');\nconst popupCloseButtons = document.querySelectorAll('.popup__close')\n\nimport  '../pages/index.css';\n\nimport { openPopup, closePopup } from './popup.js';\nimport {addCard, createCard} from './card.js';\nimport {validationParams, clearPopupInputs, enableValidation} from \"./validate.js\";\nimport {getInitialCards, getMe, editProfile, addCardOnServer, editAvatar} from './api.js';\nimport {refreshProfile} from './utils.js';\n\ngetInitialCards()\n  .then((json) => {\n    console.log('init cards', json);\n    json.forEach(el => addCard(createCard(el), elementsContainer));\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\nexport let myID;\n\ngetMe()\n  .then((json) => {\n    console.log('user', json);\n    refreshProfile(json.name, json.about, json.avatar);\n    myID = json._id;\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\nprofileAvatar.addEventListener('click', () => {\n  clearPopupInputs(avatarEditPopup, validationParams);\n  openPopup(avatarEditPopup);\n});\ncardAddBtn.addEventListener('click', () => openPopup(cardAddPopup));\n\nprofileEditBtn.addEventListener('click', () => {\n  clearPopupInputs(profileEditPopup, validationParams);\n  openPopup(profileEditPopup);\n  nameInput.value = profileName.textContent;\n  descriptionInput.value = profileDescription.textContent;\n})\n\navatarEditForm.addEventListener('submit', evt => {\n  evt.preventDefault();\n  avatarEditForm.querySelector('.form__button').textContent = 'Сохранение...'\n  editAvatar(avatarInput.value)\n    .then((json) => {\n      console.log('user avatar updated', json)\n      refreshProfile(null, null, json.avatar)\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  closePopup(avatarEditPopup);\n})\n\nprofileEditForm.addEventListener('submit', evt => {\n  evt.preventDefault();\n  profileEditForm.querySelector('.form__button').textContent = 'Сохранение...'\n  editProfile(nameInput.value, descriptionInput.value)\n    .then((json) => {\n      console.log('userinfo updated', json)\n      refreshProfile(json.name, json.about)\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  closePopup(profileEditPopup);\n})\n\ncardAddBtn.addEventListener('click', () => {\n  clearPopupInputs(cardAddPopup, validationParams);\n  openPopup(cardAddPopup);\n})\n\ncardAddForm.addEventListener('submit', evt => {\n  evt.preventDefault();\n  cardAddForm.querySelector('.form__button').textContent = 'Сохранение...'\n  addCardOnServer(cardNameInput.value, cardLinkInput.value)\n    .then((json) => {\n      addCard(createCard(json), elementsContainer, true);\n      closePopup(cardAddPopup);\n      cardNameInput.value = '';\n      cardLinkInput.value = '';\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n})\n\npopupCloseButtons.forEach(btn => {\n  btn.addEventListener('click', () => {\n    closePopup(btn.closest('.popup'))\n  })\n})\n\npopups.forEach(popup => {\n  popup.addEventListener('click', (evt) => {\n    if (evt.target.classList.contains('popup')) closePopup(popup)\n  })\n})\n\nenableValidation(validationParams);\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","closePopup","popup","classList","remove","document","removeEventListener","ESChandler","openPopup","add","evt","closeOnEscape","addEventListener","config","baseUrl","headers","authorization","URLs","deleteCard","event","card","target","closest","fetch","_id","method","then","res","ok","console","log","status","catch","err","likeCard","myLike","json","refreshLikes","cardTemplate","querySelector","content","bigImgPopup","bigImage","bigImgCaption","textContent","likes","length","some","liker","myID","createCard","cloneNode","name","cardImg","alt","src","link","ownerId","owner","style","display","addCard","container","beginning","prepend","append","validationParams","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","clearPopupInputs","settings","formElement","inputList","Array","from","querySelectorAll","buttonElement","forEach","inputElement","hideInputError","value","toggleButtonState","hasInvalidInput","disabled","validity","valid","showInputError","errorMessage","errorElement","id","profileName","profileDescription","profileAva","refreshProfile","about","avatar","backgroundImage","profileAvatar","avatarEditPopup","avatarEditForm","profileEditPopup","profileEditBtn","profileEditForm","nameInput","descriptionInput","avatarInput","cardAddPopup","cardAddBtn","cardAddForm","cardNameInput","cardLinkInput","elementsContainer","popups","popupCloseButtons","Promise","reject","el","url","preventDefault","body","JSON","stringify","btn","contains","validationMessage","isValid","setEventListeners"],"sourceRoot":""}